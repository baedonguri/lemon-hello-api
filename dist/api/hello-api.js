"use strict";function _asyncToGenerator(e){return function(){var a=e.apply(this,arguments);return new Promise(function(s,u){return function r(e,t){try{var n=a[e](t),o=n.value}catch(e){return void u(e)}if(!n.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});s(o)}("next")})}}exports=module.exports=function(s,e){var o,u=(o=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c(i,"do_post_hello_slack("+r+")...."),"public"!==r)return e.abrupt("return",Promise.reject(new Error("404 NOT FOUND - Channel:"+r)));e.next=3;break;case 3:return t=t||{},"https://hooks.slack.com/services/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",s=n,e.next=8,d("https://hooks.slack.com/services/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",s);case 8:return u=e.sent,e.abrupt("return",u);case 10:case"end":return e.stop()}},e,this)})),function(e,r,t,n){return o.apply(this,arguments)});if(!s)throw new Error("_$(global instance pool) is required!");s._;var a=s.U;if(!a)throw new Error("$U is required!");var i=a.NS(e||"GOOD","yellow"),c=s.log,r=(s.inf,s.err,require("./bootload")(s,i,function(e,r,t){var n=null;switch(e){case"LIST":n=h;break;case"GET":"!"!==r&&""===t&&(n=f);break;case"PUT":"!"!==r&&""===t&&(n=p);break;case"POST":"!"!==r&&""===t?n=_:"!"!==r&&"slack"===t&&(n=u);break;case"DELETE":"!"!==r&&""===t&&(n=v)}return n}));r.do_list_hello=h,r.do_get_hello=f,r.do_put_hello=p,r.do_post_hello=_,r.do_delete_hello=v;var t,l=[{name:"lemon"},{name:"cloud"}],d=(t=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t){var n,s,u,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=require("url"),s=require("https"),u="string"==typeof t?t:JSON.stringify(t),(a=n.parse(r)).method="POST",a.headers={"Content-Type":"application/json","Content-Length":Buffer.byteLength(u)},e.abrupt("return",new Promise(function(n,o){var e=s.request(a,function(r){var t=[];return r.setEncoding("utf8"),r.on("data",function(e){return t.push(e)}),r.on("end",function(){var e=t.join("");(r.statusCode||200)<400?n({body:e,statusCode:r.statusCode,statusMessage:r.statusMessage}):o({body:e,statusCode:r.statusCode,statusMessage:r.statusMessage})}),r});e.write(u),e.end()}));case 7:case"end":return e.stop()}},e,this)})),function(e,r){return t.apply(this,arguments)});function h(e,r,t,n){c(i,"do_list_hello("+e+")....");var o={};return o.name=s.environ("NAME"),Promise.resolve(o).then(function(e){return e.list=l,e})}function f(e,r,t,n){c(i,"do_get_hello("+e+")....");var o=a.N(e,0),s=l[o];return s?Promise.resolve(s).then(function(e){var r=Object.assign({},e);return r._id=o,r}):Promise.reject(new Error("404 NOT FOUND - id:"+o))}function p(e,r,t,n){return c(i,"do_put_hello("+e+")...."),r=r||{},f(e).then(function(e){var r=e._id;return Object.assign(l[r],t||{}),Object.assign(e,t||{})})}function _(e,r,t,n){return c(i,"do_post_hello("+e+")...."),r=r||{},t||t.name?Promise.resolve(t).then(function(e){return l.push(e),l.length-1}):Promise.reject(new Error(".name is required!"))}function v(e,r,t,n){return c(i,"do_delete_hello("+e+")...."),f(e).then(function(e){var r=e._id;return void 0===r?Promise.reject(new Error("._id is required!")):(delete l[r],e)})}return r};