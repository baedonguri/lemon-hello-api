"use strict";function initialize(r,t){var o=this;if(!r)throw new Error("$export is required.");if(!o)throw new Error("_$ is required.");if("function"!=typeof o)throw new Error("_$ should be function.");o.log;var e=o.inf,i=(o.err,o.environ("STAGE",""));i&&e("#STAGE =",i);var n=require("./api/hello-api")(o);return Object.assign(r,{hello:n})}module.exports=function(r,i){r=r||new function(){};var t=(i=i||{}).name||"lemon",o=f("STAGE",""),e="local"===o||"express"===o||"1"===f("LC",""),n={thiz:console,log:console.log,error:console.error,auto_ts:e,auto_color:e},s=function(){var r=n.auto_ts&&!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return n.auto_color?(r.unshift("[0m"),n.auto_ts&&r.unshift(c(),"L"),r.unshift("[32m")):n.auto_ts&&r.unshift(c(),"L"),n.log.apply(n.thiz,r)},u=function(){var r=n.auto_ts&&!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return n.auto_color?(r.unshift(""),r.push("[0m"),n.auto_ts&&r.unshift(c(),"I"),r.unshift("[33m")):n.auto_ts&&r.unshift(c(),"I"),n.log.apply(n.thiz,r)},a=function(){var r=n.auto_ts&&!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return n.auto_color?(r.unshift("[0m"),n.auto_ts&&r.unshift(c(),"E"),r.unshift("[31m")):n.auto_ts&&r.unshift(c(),"E"),n.error.apply(n.thiz,r)},l=function(r,t){for(var o in t){var e=t[o];void 0===e?delete r[o]:r[o]=e}return r};function c(r){var t=r||new Date,o=[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()],e=o[0],i=o[1],n=o[2],s=o[3],u=o[4],a=o[5];return(e<10?"0":"")+e+"-"+(i<10?"0":"")+i+"-"+(n<10?"0":"")+n+" "+(s<10?"0":"")+s+":"+(u<10?"0":"")+u+":"+(a<10?"0":"")+a}function f(r,t){var o=i.env||process&&process.env||{},e=o&&o[r]||void 0;if(t&&t instanceof Error&&void 0===e)throw t;return void 0===e?t:e}var h=function r(t,o){if(t){var e=r,i=void 0!==e[t]?e[t]:void 0;return void 0===o?i:e[t]=void 0===i?(s("INFO! service["+t+"] registered"),o):(a("WARN! service["+t+"] exists! so extends "),i=l(i=i||{},o=o||{}))}};return h.STAGE=o,h.id=t,h.log=s,h.inf=u,h.err=a,h.extend=l,h.ts=c,h.environ=f,h.$console=n,h.toString=function(){return t||"$ROOT"},r._log=s,r._inf=u,r._err=a,r._$=h,(r[h.id]=h)("_",require("lodash/core")),initialize.apply(h,[r,i]),r};