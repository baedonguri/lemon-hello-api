"use strict";function initialize(r,t){var o=this;if(!r)throw new Error("$export is required.");if(!o)throw new Error("_$ is required.");if("function"!=typeof o)throw new Error("_$ should be function.");o.log;var e=o.inf,i=(o.err,o.environ("STAGE",""));i&&e("#STAGE =",i),o("U",require("./lib/utilities")(o));var n=require("./api/hello-api")(o);return Object.assign(r,{hello:n})}module.exports=function(r,i){r=r||new function(){};var t=(i=i||{}).name||"lemon",o=h("STAGE",""),e="1"===h("TS","1"),n="local"===o||"express"===o||"1"===h("LC",""),s={thiz:console,log:console.log,error:console.error,auto_ts:e,auto_color:n},u=function(){var r=!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return s.auto_color?(r.unshift("[0m"),s.auto_ts&&r.unshift(c(),"L")||r.unshift("L"),r.unshift("[32m")):s.auto_ts&&r.unshift(c(),"L"),s.log.apply(s.thiz,r)},a=function(){var r=!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return s.auto_color?(r.unshift(""),r.push("[0m"),s.auto_ts&&r.unshift(c(),"I")||r.unshift("I"),r.unshift("[33m")):s.auto_ts&&r.unshift(c(),"I"),s.log.apply(s.thiz,r)},l=function(){var r=!Array.isArray(arguments)&&Array.prototype.slice.call(arguments)||arguments;return s.auto_color?(r.unshift(""),r.push("[0m"),s.auto_ts&&r.unshift(c(),"E")||r.unshift("E"),r.unshift("[31m")):s.auto_ts&&r.unshift(c(),"E"),s.error.apply(s.thiz,r)},f=function(r,t){for(var o in t){var e=t[o];void 0===e?delete r[o]:r[o]=e}return r};function c(r){var t=r||new Date,o=[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()],e=o[0],i=o[1],n=o[2],s=o[3],u=o[4],a=o[5];return(e<10?"0":"")+e+"-"+(i<10?"0":"")+i+"-"+(n<10?"0":"")+n+" "+(s<10?"0":"")+s+":"+(u<10?"0":"")+u+":"+(a<10?"0":"")+a}function h(r,t){var o=i.env||process&&process.env||{},e=o&&o[r]||void 0;if(t&&t instanceof Error&&void 0===e)throw t;return void 0===e?t:e}var v=function r(t,o){if(t){var e=r,i=void 0!==e[t]?e[t]:void 0;return void 0===o?i:e[t]=void 0===i?(u("INFO! service["+t+"] registered"),o):(l("WARN! service["+t+"] exists! so extends "),i=f(i=i||{},o=o||{}))}};return v.STAGE=o,v.id=t,v.log=u,v.inf=a,v.err=l,v.extend=f,v.ts=c,v.environ=h,v.$console=s,v.toString=function(){return t||"$ROOT"},r._log=u,r._inf=a,r._err=l,r._$=v,(r[v.id]=v)("_",require("lodash/core")),initialize.apply(v,[r,i]),r};